local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local flyActive = false
local speed = 50

local button = player:WaitForChild("PlayerGui"):WaitForChild("FlyUI"):WaitForChild("ToggleFlyButton")

button.MouseButton1Click:Connect(function()
    flyActive = not flyActive
    if flyActive then
        button.Text = "Fly: Açık"
    else
        button.Text = "Fly: Kapalı"
        humanoid:ChangeState(Enum.HumanoidStateType.Running)
    end
end)

game:GetService("RunService").RenderStepped:Connect(function()
    if flyActive and character then
        humanoid:ChangeState(Enum.HumanoidStateType.Physics)
        local hrp = character:WaitForChild("HumanoidRootPart")
        local move = humanoid.MoveDirection
        local input = move * speed
        hrp.Velocity = Vector3.new(input.X, speed, input.Z)
    end
end)
